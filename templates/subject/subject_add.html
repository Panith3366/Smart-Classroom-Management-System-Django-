{% extends 'subject/base.html' %}
{% block content %}
<div class="card p-4">
    <h3>Add Subject</h3>
    <form id="subject-form">
        {% csrf_token %}
        <div class="mb-3">
            <label>Subject Name</label>
            <input type="text" class="form-control" name="name" required>
        </div>
        <div class="mb-3">
            <label>Subject Code</label>
            <input type="text" class="form-control" name="code" required>
        </div>
        <div class="mb-3">
            <label>Credits</label>
            <input type="number" class="form-control" name="credits" required>
        </div>
        <button type="submit" class="btn btn-success">Submit</button>
    </form>
</div>
<script>
    $('#subject-form').on('submit', function(e) {
        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: '/api/subjects/',
            data: $(this).serialize(),
            headers: { 'X-CSRFToken': '{{ csrf_token }}' },
            success: () => { window.location.href = "/subjects/"; }
        });
    });
</script>
{% endblock %}
